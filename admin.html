<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin - Garimpos do Gu</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="admin-body">

  <header class="main-header">
    <div class="header-left">
      <h1 id="logo-admin">Garimpos do Gu - Painel ADM</h1>
    </div>
    <div class="header-right">
      <button id="back-home" class="small-ghost">Voltar</button>
    </div>
  </header>

  <!-- LOGIN -->
  <section id="login-container" class="card center-card">
    <h2>Área Administrativa</h2>
    <input type="text" id="username" placeholder="Usuário" autocomplete="username" />
    <input type="password" id="password" placeholder="Senha" autocomplete="current-password" />
    <div class="row">
      <button id="btn-login" onclick="handleLogin()">Entrar</button>
      <button id="btn-visit" class="small-ghost" onclick="window.location.href='index.html'">Ir ao site</button>
    </div>
    <p id="login-error" class="msg-error"></p>
    <small class="hint">Usuário padrão: <strong>admin</strong> / Senha: <strong>1234</strong></small>
  </section>

  <!-- PAINEL -->
  <main id="admin-panel" class="hidden">
    <section class="card admin-grid">
      <div>
        <h2>Gerenciar Produtos</h2>
        <form id="produto-form">
          <input id="produto-nome" type="text" placeholder="Nome do produto" required />
          <input id="produto-link" type="url" placeholder="Link do produto (https://...)" required />
          <input id="produto-imagem" type="url" placeholder="Imagem do produto (URL)" required />
          <input id="produto-preco" type="text" placeholder="Preço (Ex: R$ 99,90)" required />
          <select id="produto-categoria" required>
            <option>Eletrodomésticos</option>
            <option>Utensílios de cozinha</option>
            <option>Peças de carro</option>
            <option>Celulares & Acessórios</option>
            <option>Roupas & Itens de Moda</option>
            <option>Videogames & Jogos</option>
          </select>
          <div class="row">
            <button type="submit">Adicionar / Salvar</button>
            <button type="button" class="small-ghost" onclick="limparFormProduto()">Limpar</button>
          </div>
        </form>

        <h3>Produtos Cadastrados</h3>
        <ul id="lista-produtos" class="admin-list"></ul>
      </div>

      <div>
        <h2>Administradores</h2>
        <form id="admin-form">
          <input id="adm-nome" type="text" placeholder="Novo usuário (ex: joao)" required />
          <input id="adm-senha" type="password" placeholder="Senha (mínimo 3 chars)" required />
          <div class="row">
            <button type="submit">Criar Admin</button>
            <button type="button" class="small-ghost" onclick="carregarAdmins()">Atualizar</button>
          </div>
        </form>

        <h3>Lista de Admins</h3>
        <ul id="lista-admins" class="admin-list"></ul>

        <hr/>
        <h3>Trocar usuário/senha rápido</h3>
        <input id="novo-usuario" placeholder="Novo usuário" />
        <input id="nova-senha" type="password" placeholder="Nova senha" />
        <div class="row">
          <button onclick="atualizarLogin()">Atualizar Login</button>
          <button onclick="logout()" class="small-ghost">Sair</button>
        </div>
        <p id="atualizar-msg" class="msg-success"></p>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
  <script>
    document.getElementById('back-home')?.addEventListener('click', () => location.href = 'index.html');
    function handleLogin(){ /* wrapper to avoid name collisions */ login(); }
  </script>
</body>
</html>
